import{l as y}from"./transform-9d025c96.js";import{e as M,i as b,a as A,b as R,f as q}from"./defaultLocale-1b949c49.js";import{i as F}from"./init-77b53fdd.js";function g(n,r){return n==null||r==null?NaN:n<r?-1:n>r?1:n>=r?0:NaN}function S(n,r){return n==null||r==null?NaN:r<n?-1:r>n?1:r>=n?0:NaN}function w(n){let r,i,t;n.length!==2?(r=g,i=(u,o)=>g(n(u),o),t=(u,o)=>n(u)-o):(r=n===g||n===S?n:z,i=n,t=n);function c(u,o,e=0,m=u.length){if(e<m){if(r(o,o)!==0)return m;do{const l=e+m>>>1;i(u[l],o)<0?e=l+1:m=l}while(e<m)}return e}function f(u,o,e=0,m=u.length){if(e<m){if(r(o,o)!==0)return m;do{const l=e+m>>>1;i(u[l],o)<=0?e=l+1:m=l}while(e<m)}return e}function a(u,o,e=0,m=u.length){const l=c(u,o,e,m-1);return l>e&&t(u[l-1],o)>-t(u[l],o)?l-1:l}return{left:c,center:a,right:f}}function z(){return 0}function I(n){return n===null?NaN:+n}const P=w(g),$=P.right;w(I).center;const j=$,x=Math.sqrt(50),B=Math.sqrt(10),C=Math.sqrt(2);function v(n,r,i){const t=(r-n)/Math.max(0,i),c=Math.floor(Math.log10(t)),f=t/Math.pow(10,c),a=f>=x?10:f>=B?5:f>=C?2:1;let u,o,e;return c<0?(e=Math.pow(10,-c)/a,u=Math.round(n*e),o=Math.round(r*e),u/e<n&&++u,o/e>r&&--o,e=-e):(e=Math.pow(10,c)*a,u=Math.round(n/e),o=Math.round(r/e),u*e<n&&++u,o*e>r&&--o),o<u&&.5<=i&&i<2?v(n,r,i*2):[u,o,e]}function D(n,r,i){if(r=+r,n=+n,i=+i,!(i>0))return[];if(n===r)return[n];const t=r<n,[c,f,a]=t?v(r,n,i):v(n,r,i);if(!(f>=c))return[];const u=f-c+1,o=new Array(u);if(t)if(a<0)for(let e=0;e<u;++e)o[e]=(f-e)/-a;else for(let e=0;e<u;++e)o[e]=(f-e)*a;else if(a<0)for(let e=0;e<u;++e)o[e]=(c+e)/-a;else for(let e=0;e<u;++e)o[e]=(c+e)*a;return o}function d(n,r,i){return r=+r,n=+n,i=+i,v(n,r,i)[2]}function E(n,r,i){r=+r,n=+n,i=+i;const t=r<n,c=t?d(r,n,i):d(n,r,i);return(t?-1:1)*(c<0?1/-c:c)}function G(n,r){return n=+n,r=+r,function(i){return Math.round(n*(1-i)+r*i)}}function H(n){return Math.max(0,-M(Math.abs(n)))}function J(n,r){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(M(r)/3)))*3-M(Math.abs(n)))}function K(n,r){return n=Math.abs(n),r=Math.abs(r)-n,Math.max(0,M(r)-M(n))+1}function L(n){return function(){return n}}function O(n){return+n}var N=[0,1];function s(n){return n}function p(n,r){return(r-=n=+n)?function(i){return(i-n)/r}:L(isNaN(r)?NaN:.5)}function Q(n,r){var i;return n>r&&(i=n,n=r,r=i),function(t){return Math.max(n,Math.min(r,t))}}function T(n,r,i){var t=n[0],c=n[1],f=r[0],a=r[1];return c<t?(t=p(c,t),f=i(a,f)):(t=p(t,c),f=i(f,a)),function(u){return f(t(u))}}function U(n,r,i){var t=Math.min(n.length,r.length)-1,c=new Array(t),f=new Array(t),a=-1;for(n[t]<n[0]&&(n=n.slice().reverse(),r=r.slice().reverse());++a<t;)c[a]=p(n[a],n[a+1]),f[a]=i(r[a],r[a+1]);return function(u){var o=j(n,u,1,t)-1;return f[o](c[o](u))}}function V(n,r){return r.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function W(){var n=N,r=N,i=b,t,c,f,a=s,u,o,e;function m(){var h=Math.min(n.length,r.length);return a!==s&&(a=Q(n[0],n[h-1])),u=h>2?U:T,o=e=null,l}function l(h){return h==null||isNaN(h=+h)?f:(o||(o=u(n.map(t),r,i)))(t(a(h)))}return l.invert=function(h){return a(c((e||(e=u(r,n.map(t),y)))(h)))},l.domain=function(h){return arguments.length?(n=Array.from(h,O),m()):n.slice()},l.range=function(h){return arguments.length?(r=Array.from(h),m()):r.slice()},l.rangeRound=function(h){return r=Array.from(h),i=G,m()},l.clamp=function(h){return arguments.length?(a=h?!0:s,m()):a!==s},l.interpolate=function(h){return arguments.length?(i=h,m()):i},l.unknown=function(h){return arguments.length?(f=h,l):f},function(h,k){return t=h,c=k,m()}}function X(){return W()(s,s)}function Y(n,r,i,t){var c=E(n,r,i),f;switch(t=A(t??",f"),t.type){case"s":{var a=Math.max(Math.abs(n),Math.abs(r));return t.precision==null&&!isNaN(f=J(c,a))&&(t.precision=f),R(t,a)}case"":case"e":case"g":case"p":case"r":{t.precision==null&&!isNaN(f=K(c,Math.max(Math.abs(n),Math.abs(r))))&&(t.precision=f-(t.type==="e"));break}case"f":case"%":{t.precision==null&&!isNaN(f=H(c))&&(t.precision=f-(t.type==="%")*2);break}}return q(t)}function Z(n){var r=n.domain;return n.ticks=function(i){var t=r();return D(t[0],t[t.length-1],i??10)},n.tickFormat=function(i,t){var c=r();return Y(c[0],c[c.length-1],i??10,t)},n.nice=function(i){i==null&&(i=10);var t=r(),c=0,f=t.length-1,a=t[c],u=t[f],o,e,m=10;for(u<a&&(e=a,a=u,u=e,e=c,c=f,f=e);m-- >0;){if(e=d(a,u,i),e===o)return t[c]=a,t[f]=u,r(t);if(e>0)a=Math.floor(a/e)*e,u=Math.ceil(u/e)*e;else if(e<0)a=Math.ceil(a*e)/e,u=Math.floor(u*e)/e;else break;o=e}return n},n}function _(){var n=X();return n.copy=function(){return V(n,_())},F.apply(n,arguments),Z(n)}export{V as a,w as b,X as c,_ as l,E as t};
